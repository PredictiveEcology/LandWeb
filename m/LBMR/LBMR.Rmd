---
title: "LBMR"
author: "Module Author"
date: "20 September 2016"
output: pdf_document
---

# Overview

This is the major rewrite of the `LANDIS-II` biomass succession module as a `SpaDES` module. This is a 'landscape' module that simulates vegetation change through biomass accumulation in pixels. Biomass accumulation is affected by competition, which is itself based on the relative biomass of other `cohorts` in the same pixel. This module contains the LANDIS-II Ward seed dispersal kernel. 

Parameters for this module can be taken from a variety of sources. The default module downloads publically available vegetation layers from NRCAN servers, plus parameters developed by Boulanger et al. (2014). Default sources used by this module can be found here (must have run the `simInit` below):
`depends(mySim)@dependencies[["LBMR"]]@inputObjects$sourceURL`

These default values are not particularly useful. Users should likely have data prepraration modules to help out on this.

For all equations, see the source code here, and the LANDIS-II manual. The manual for this module has not been written yet. 


```{r update SpaDES, eval=TRUE}
detach("package:SpaDES", unload = TRUE)
devtools::install_github("PredictiveEcology/SpaDES@development", dependencies = FALSE)
```

```{r module_usage}
library(SpaDES)
library(magrittr)

inputDir <- file.path(dirname(tempdir()), "LBMR", "inputs") %>% checkPath(create = TRUE)
outputDir <- file.path(dirname(tempdir()), "LBMR", "outputs") 
times <- list(start = 0, end = 10)
parameters <- list(
  .globals = list(verbose = FALSE),
  LBMR = list(.plotInitialTime = NA)
  #.progress = list(type = "text", interval = 1), # for a progress bar
  ## If there are further modules, each can have its own set of parameters:
  #module1 = list(param1 = value1, param2 = value2),
  #module2 = list(param1 = value1, param2 = value2)
)
modules <- list("LBMR")
objects <- list(successionTimestep = 2)
paths <- list(
  cachePath = file.path(outputDir, "cache"),
  modulePath = file.path("."),
  inputPath = inputDir,
  outputPath = outputDir
)

mySim <- simInit(times = times, params = parameters, modules = modules,
                 objects = objects, paths = paths)

mySimOut <- spades(mySim, debug = TRUE)
```

