[{"path":"index.html","id":"overview","chapter":"Overview","heading":"Overview","text":"manual live document automatically updated changes made underlying model code documentation.","code":""},{"path":"index.html","id":"background","chapter":"Overview","heading":"0.1 Background","text":"","code":""},{"path":"index.html","id":"the-landweb-model","chapter":"Overview","heading":"0.2 The LandWeb Model","text":"LandWeb first large scale, data-driven approach simulating historic natural range variation (H/NRV) (https://landweb.ca).\ndeveloping model, analyses, well infrastructure host data, strove implement single, reproducible workflow facilitate running simulations, analyses, model reuse future expansion.\ntight linkage data simulation model made possible via implementation using SpaDES family packages (Chubaty & McIntire 2019) within R Statistical Language Environment (R-base?).\ninformation SpaDES, see https://spades.predictiveecology.org/.LandWeb model integrates two well-used models forest stand succession wildfire simulation, implemented SpaDES simulation platform collection submodels (implement SpaDES modules).\nVegetation dynamics modeled using LandR Biomass suite modules, reimplement LANDIS-II Biomass Succession model (Scheller & Mladenoff 2004; Scheller et al. 2007) R.\nWildfire dynamics modeled using implementation LandMine (Andison 1996; Andison 1998).\nSimulations run entire LandWeb study area, spans western Canadian boreal forest.\nsummary results presented using web app, can run locally.\nFigure 0.1: LandWeb study area (blue) mountain boreal caribou ranges highlighted (pink).\n","code":""},{"path":"index.html","id":"data-preparation","chapter":"Overview","heading":"0.2.1 Data preparation","text":"Input data derived multiple sources, including several publicly available well proprietary datasets.Detailed descriptions sources provided relevant sections manual.","code":""},{"path":"index.html","id":"public-data-sources","chapter":"Overview","heading":"0.2.1.1 Public data sources","text":"Land Cover Classification 2005 map (longer available Government Canada’s Open Data website);LANDIS-II species traits: https://github.com/dcyr/LANDIS-II_IA_generalUseFiles;LANDIS-II parameterization tables data: https://github.com/LANDIS-II-Foundation/Extensions-Succession-Archive/master/biomass-succession-archive/trunk/tests/v6.0-2.0/;Canada biomass, stand volume, species data (Beaudoin et al. 2014): http://tree.pfc.forestry.ca;National ecodistrict polygons: http://sis.agr.gc.ca/cansis/nsdb/ecostrat/district/ecodistrict_shp.zip;National ecoregion polygons: http://sis.agr.gc.ca/cansis/nsdb/ecostrat/region/ecoregion_shp.zip;National ecozone polygons: http://sis.agr.gc.ca/cansis/nsdb/ecostrat/zone/ecozone_shp.zip.","code":""},{"path":"index.html","id":"proprietary-data-sources","chapter":"Overview","heading":"0.2.1.2 Proprietary data sources","text":"proprietary data used model stored access-controlled Google Drive location.biomass species maps created Pickell & Coops (2016) resolution 100m x 100m LandSat kNN based CASFRI;various reporting polygons used summarize model results app.request access, please contact Alex Chubaty (achubaty@-cast.ca).","code":""},{"path":"index.html","id":"vegetation-dynamics","chapter":"Overview","heading":"0.2.2 Vegetation dynamics","text":"Vegetation growth succession modeled using re-implementation LANDIS-II Biomass model, widely used well-documented dynamic vegetation succession model (Scheller & Mladenoff 2004; Scheller et al. 2007).\nre-implemented model largely follows original LANDIS-II source code (v 3.6.2; Scheller & Miranda (2015)), modifications respect species traits parameterization.\nmodel simulates landscape-scale forest dynamics spatio-temporally explicit manner, using cohorts tree species within pixel.\nMultiple ecological processes captured model, including vegetation growth, mortality, seed dispersal, post-disturbance regeneration.submodel described detail Vegetation submodel.","code":""},{"path":"index.html","id":"wildfire-dynamics","chapter":"Overview","heading":"0.2.3 Wildfire dynamics","text":"Wildfire simulated using re-implementation fire submodel Andison’s (1996; 1998) LandMine model landscape disturbance.submodel described detail [Wildfire submodel].","code":""},{"path":"index.html","id":"summary-maps-and-statistics","chapter":"Overview","heading":"0.2.4 Summary maps and statistics","text":"Summaries derived simulation outputs, consist maps showing time since fire well histogram summaries 1) number large patches (.e., patches number hectares specified user) contained within selected spatial area; 2) vegetation cover within selected spatial area.\nHistograms provided spatial area polygon, age class, species.\nAuthorized users can additionally overlay current stand conditions onto histograms.\nSimulation outputs summarized several publicly available reporting polygons (including Alberta Natural Ecoregions Caribou Ranges).described detail [Model outputs].","code":""},{"path":"index.html","id":"landweb-app","chapter":"Overview","heading":"0.2.5 LandWeb app","text":"Using web app described Web app.","code":""},{"path":"index.html","id":"previous-manual-versions","chapter":"Overview","heading":"0.3 Previous Manual Versions","text":"available, archived copies previous manual versions provided links .LandR Manual v3.0.0 (current)","code":""},{"path":"getting-started.html","id":"getting-started","chapter":"1 Getting started","heading":"1 Getting started","text":"","code":""},{"path":"getting-started.html","id":"prerequisites","chapter":"1 Getting started","heading":"1.1 Prerequisites","text":"Minimum system requirements:Windows 10, macOS 10.13 High Sierra, Ubuntu 20.04 LTS;20 GB storage space, plus additional storage model outputs;128 GB RAM run model full area (less sub-areas);High-speed internet connection.following section provides details installing prerequisite software running LandWeb.","code":""},{"path":"getting-started.html","id":"docker","chapter":"1 Getting started","heading":"1.1.1 Docker","text":"prefer use Docker, skip subsection.Due idiosyncratic difficulties installing multiple pieces software ensuring correct versions used throughout, provide prebuilt Docker (https://www.docker.com/) images, better provides consistent reproducible software environment running model.Thus, using images preferred ‘bare-metal’ installation.Install Docker system following https://docs.docker.com/get-docker/.Next, pull image Docker Hub:container running, open web browser go localhost:8080.Login Rstudio session user rstudio password <mySecretPassword> (change password launching container ).finished, can stop destroy container:","code":"## get the image\ndocker pull achubaty/landweb-standalone:latest\n\n## launch a new container based on thi image\ndocker run -d -it \\\n  -e GITHUB_PAT=$(cat ${HOME}/.Renviron | grep GITHUB_PAT | cut -d '=' -f 2) \\\n  -e PASSWORD='<mySecretPassword>' \\\n  --memory=128g \\\n  --cpus=32 \\\n  -p 127.0.0.1:8080:8787 \\\n  --name LandWeb \\\n  achubaty/landweb-standalone:latestdocker stop LandWeb\ndocker rm LandWeb"},{"path":"getting-started.html","id":"development-tools","chapter":"1 Getting started","heading":"1.1.2 Development tools","text":"","code":""},{"path":"getting-started.html","id":"windows","chapter":"1 Getting started","heading":"1.1.2.1 Windows","text":"Download Rtools version 4.2 https://cran.r-project.org/bin/windows/Rtools/rtools42/rtools.html install administrator.\nRtools provides necessary compilers etc. build install R packages source Windows.\ninstallation, sure check option add Rtools PATH.\nDownload Rtools version 4.2 https://cran.r-project.org/bin/windows/Rtools/rtools42/rtools.html install administrator.\nRtools provides necessary compilers etc. build install R packages source Windows.installation, sure check option add Rtools PATH.Download install proper text editor, e.g. Notepad++ (https://notepad-plus-plus.org/downloads/).Download install proper text editor, e.g. Notepad++ (https://notepad-plus-plus.org/downloads/).","code":""},{"path":"getting-started.html","id":"macos","chapter":"1 Getting started","heading":"1.1.2.2 macOS","text":"","code":""},{"path":"getting-started.html","id":"xcode-command-line-tools","chapter":"1 Getting started","heading":"1.1.2.2.1 Xcode command line tools","text":"build software, need Xcode command line tools1, include various compilers git version control software.","code":"xcode-select --install"},{"path":"getting-started.html","id":"homebrew-package-manager","chapter":"1 Getting started","heading":"1.1.2.2.2 homebrew package manager","text":"Next, install homebrew provides package manager macOS.\nfacilitate software updates handle various package dependency issues automatically.","code":"/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\""},{"path":"getting-started.html","id":"ubuntu-linux","chapter":"1 Getting started","heading":"1.1.2.3 Ubuntu Linux","text":"","code":"sudo apt-get update\n\nsudo apt-get -y install \\\n    build-essential \\\n    biber \\\n    ccache \\\n    cmake \\\n    curl \\\n    libarchive-dev \\\n    libcairo2-dev \\\n    libcurl4-openssl-dev \\\n    libgit2-dev \\\n    libglpk-dev \\\n    libgmp3-dev \\\n    libicu-dev \\\n    libjq-dev \\\n    libmagick++-dev \\\n    libnode-dev \\\n    libpng-dev \\\n    libprotobuf-dev \\\n    libprotoc-dev \\\n    libssh2-1-dev \\\n    libssl-dev \\\n    libxml2-dev \\\n    libxt-dev \\\n    make \\\n    p7zip-full p7zip-rar \\\n    pandoc pandoc-citeproc \\\n    protobuf-compiler \\\n    qpdf \\\n    screen \\\n    sysstat \\\n    texinfo texlive-base texlive-bibtex-extra \\\n    texlive-fonts-extra texlive-latex-extra texlive-xetex \\\n    wget \\\n    xauth \\\n    xfonts-base \\\n    xvfb \\\n    zlib1g-dev"},{"path":"getting-started.html","id":"geospatial-libraries","chapter":"1 Getting started","heading":"1.1.3 Geospatial libraries","text":"order work geospatial data, recent versions GDAL, PROJ, GEOS geospatial libraries need available system.","code":""},{"path":"getting-started.html","id":"windows-1","chapter":"1 Getting started","heading":"1.1.3.1 Windows","text":"additional needed, recent versions R geospatial packages include pre-bundled versions GDAL, PROJ, GEOS.","code":""},{"path":"getting-started.html","id":"macos-1","chapter":"1 Getting started","heading":"1.1.3.2 macOS","text":"Use homebrew install required geospatial software libraries:","code":"brew install pkg-config\nbrew install gdal\n# brew install geos\n# brew install proj\nbrew install udunits"},{"path":"getting-started.html","id":"ubuntu-linux-1","chapter":"1 Getting started","heading":"1.1.3.3 Ubuntu Linux","text":"default Ubuntu 20.04 LTS package repositories ship older versions geospatial libraries using, need add additional repositories get latest versions.Install additional system dependencies serve prerequisites running LandWeb model R.Optionally, install mapshaper geospatial library used speed polygon simplification.","code":"## add GIS repository\nsudo add-apt-repository ppa:ubuntugis-unstable/ppa\nsudo apt-get updatesudo apt-get -y install \\\n    gdal-bin \\\n    libgdal-dev \\\n    libgeos-dev \\\n    libproj-dev \\\n    libudunits2-dev \\\n    python3-gdal## mapshaper installation\nsudo apt-get remove -y libnode-dev\n\ncurl -sL https://deb.nodesource.com/setup_20.x | sudo -E bash -\n\nsudo apt install nodejs\nsudo npm install npm@latest -g\nsudo npm install -g mapshaper"},{"path":"getting-started.html","id":"git-git-kraken-and-github","chapter":"1 Getting started","heading":"1.1.4 git, Git Kraken, and GitHub","text":"git version control software used throughout project, required ‘checkout’ specific versions code well make changes ‘push’ changes model code repository.Install latest version git https://git-scm.com/downloads via package manager.Windows users install administrator.\nUse nano (instead vi/vim) default text editor.\nchoices, use recommended settings.macOS users, git included Xcode command line tools.Create GitHub (https://github.com) account don’t already one, configure Personal Access Token (PAT).GitHub (https://github.com) account required assist package installation accessing model code.Several packages used LandWeb available GitHub.\ninstalling several , want ensure can without GitHub rate-limiting requests.\nWithout PAT, packages may temporarily fail install, can retried little later (usually 1 hour).Create GitHub PAT following instructions2;Create GitHub PAT following instructions2;sure uncheck scopes.sure uncheck scopes.Copy token save text file home directory called .Renviron:\nRun following R session edit ~/.Renviron:\n\ninstall.packages(\"usethis\")\nusethis::edit_r_environ()\nPaste following .Renviron file, using copied token:\nGITHUB_PAT=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxCopy token save text file home directory called .Renviron:Run following R session edit ~/.Renviron:Paste following .Renviron file, using copied token:creating ~/.Renviron using text editor, sure save without .txt extension.\nWindows users particular ensure edit file via Rstudio per , use proper text editor, e.g., Notepad++ (https://notepad-plus-plus.org/downloads/).Optional. Install latest version GitKraken https://www.gitkraken.com/download/.free version sufficient access public repositories used project.\nHowever, paid pro version required access private repositories.","code":"\ninstall.packages(\"usethis\")\nusethis::edit_r_environ()GITHUB_PAT=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"},{"path":"getting-started.html","id":"r-and-rstudio","chapter":"1 Getting started","heading":"1.1.5 R and Rstudio","text":"Download install R version 4.2.3.WindowsDownload R https://cran.r-project.org/bin/windows/base/R-4.2.3-win.exe;Install R administrator.macOSInstall rig (https://github.com/r-lib/rig) manage multiple R installations.Ubuntu LinuxAdd CRAN apt repository get required version R.Install R version 4.2.3To install previous versions R see https://github.com/achubaty/r-config/blob/master/using-multiple-R-versions--linux.Rmd use rig (https://github.com/r-lib/rig).Download install latest version Rstudio https://www.rstudio.com/products/rstudio/download/.Windows users install Rstudio administrator.(optional) Linux, configure ccache speed R package re-installation updates3.\n## configure ccache R package installation\nmkdir -p ~/.ccache\nmkdir -p ~/.R\n{ echo 'VER='; \\\n  echo 'CCACHE=ccache'; \\\n  echo 'CC=$(CCACHE) gcc$(VER)'; \\\n  echo 'CXX=$(CCACHE) g++$(VER)'; \\\n  echo 'CXX11=$(CCACHE) g++$(VER)'; \\\n  echo 'CXX14=$(CCACHE) g++$(VER)'; \\\n  echo 'FC=$(CCACHE) gfortran$(VER)'; \\\n  echo 'F77=$(CCACHE) gfortran$(VER)'; } >> ~/.R/Makevars\n{ echo 'max_size = 5.0G'; \\\n  echo 'sloppiness = include_file_ctime'; \\\n  echo 'hash_dir = false'; } >> ~/.ccache/ccache.conf(optional) Linux, configure ccache speed R package re-installation updates3.","code":"brew tap r-lib/rig\nbrew install --cask rig\n\n## e.g., M1/M2 mac users, install the arm version\nrig install 4.2-arm64\n\n## start Rstudio using a specific R version:\nrig rstudio 4.2-arm64## add R repository\nsudo sh -c 'echo \"deb https://cran.rstudio.com/bin/linux/ubuntu focal-cran40/\" > \\\n    /etc/apt/sources.list.d/cran.list'\nsudo apt-key adv --keyserver keyserver.ubuntu.com \\\n    --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9\n\nsudo apt-get update## configure ccache for R package installation\nmkdir -p ~/.ccache\nmkdir -p ~/.R\n{ echo 'VER='; \\\n  echo 'CCACHE=ccache'; \\\n  echo 'CC=$(CCACHE) gcc$(VER)'; \\\n  echo 'CXX=$(CCACHE) g++$(VER)'; \\\n  echo 'CXX11=$(CCACHE) g++$(VER)'; \\\n  echo 'CXX14=$(CCACHE) g++$(VER)'; \\\n  echo 'FC=$(CCACHE) gfortran$(VER)'; \\\n  echo 'F77=$(CCACHE) gfortran$(VER)'; } >> ~/.R/Makevars\n{ echo 'max_size = 5.0G'; \\\n  echo 'sloppiness = include_file_ctime'; \\\n  echo 'hash_dir = false'; } >> ~/.ccache/ccache.conf"},{"path":"getting-started.html","id":"getting-the-code","chapter":"1 Getting started","heading":"1.2 Getting the code","text":"modules written R model code developed collaboratively using GitHub (https://github.com), module contained repository.\nCode shared among modules bundled R packages, hosted GitHub repositories.\npackage code automatically regularly tested using cross-platform continuous integration frameworks ensure code reliable free errors.Windows users ensure GitHub/ directory accessible ~/GitHub ~/Documents/GitHub creating directory junction:","code":"mkdir -p ~/GitHub\ncd ~/GitHub\n\n## get development branch (app and deploy are private submodules)\ngit clone --recurse-submodules \\\n  -j8  https://github.com/PredictiveEcology/LandWebmklink /J C:\\\\Users\\\\username\\\\Documents\\\\GitHub C:\\\\Users\\\\username\\\\GitHub"},{"path":"getting-started.html","id":"project-directory-structure","chapter":"1 Getting started","heading":"1.3 Project directory structure","text":"Model code organized following directories summarized table .NOTE: may useful store data different location, map location back e.g., cache/, inputs/, /outputs/ directories using symbolic links.\nSee R’s ?file.link set machine.\nTable 1.1: LandWeb project directory structure\n","code":""},{"path":"getting-started.html","id":"updating-the-code","chapter":"1 Getting started","heading":"1.4 Updating the code","text":"cloned LandWeb code repository, users can keep --date using preferred graphical git tools (e.g., GitKraken) command line.","code":""},{"path":"getting-started.html","id":"using-gitkraken","chapter":"1 Getting started","heading":"1.4.1 Using GitKraken","text":"\nFigure 1.1: Screenshot showing showing code commits Git Kraken. submodules pane highlighted bottom left.\nOpen LandWeb repo, moments see commit history update reflect latest changes server.Open LandWeb repo, moments see commit history update reflect latest changes server.‘Pull’ latest changes repo, noting status git submodules (left hand side) may change.‘Pull’ latest changes repo, noting status git submodules (left hand side) may change.submodules changed status, one, right-click select ‘Update ’.submodules changed status, one, right-click select ‘Update ’.","code":""},{"path":"getting-started.html","id":"using-the-command-line","chapter":"1 Getting started","heading":"1.4.2 Using the command line","text":"WARNING: experienced git users !","code":"git pull\ngit submodule update"},{"path":"getting-started.html","id":"data-requirements","chapter":"1 Getting started","heading":"1.5 Data requirements","text":"order access use proprietary data LandWeb simulations, need granted access shared Google Drive directory.\nfirst-run model, required data downloaded inputs/ directory.request access, please contact Alex Chubaty (achubaty@-cast.ca).","code":""},{"path":"getting-started.html","id":"getting-help","chapter":"1 Getting started","heading":"1.6 Getting help","text":"https://github.com/PredictiveEcology/LandWeb/issues","code":""},{"path":"running-landweb.html","id":"running-landweb","chapter":"2 Running LandWeb","heading":"2 Running LandWeb","text":"Launch Rstudio open LandWeb Rstudio project (LandWeb.Rproj);Open file 00-global.R run line sequence, responding prompts required.can run model, first need install packages required project restoring project’s snapshot file.","code":"\noptions(renv.config.mran.enabled = FALSE)\nrenv::restore()"},{"path":"running-landweb.html","id":"model-setup-and-configuration","chapter":"2 Running LandWeb","heading":"2.1 Model setup and configuration","text":"default settings study area, model version, scenario defined 01a-globalvars.R.\ndefaults defined ‘dot-variables’ (e.g., .studyAreaName) can set externally main script\n(e.g., .studyAreaName defined running 01a-globalvars.R, user-set value used, rather default defined script).Advanced setup model run customization described Advanced setup.","code":""},{"path":"running-landweb.html","id":"select-a-study-area","chapter":"2 Running LandWeb","heading":"2.1.1 Select a study area","text":"model can run entire study area, certain individual provinces (currently AB, SK, MB, NWT), groups predefined FMAs (see Fig. 1 Table 1).","code":""},{"path":"running-landweb.html","id":"fma-boundaries","chapter":"2 Running LandWeb","heading":"2.1.1.1 FMA boundaries","text":"Currently, subset FMAs within LandWeb study area predefined run (.e., without needing run model entire study area; see Table 2).","code":""},{"path":"running-landweb.html","id":"choosing-a-study-area","chapter":"2 Running LandWeb","heading":"2.1.1.2 Choosing a study area","text":"model can run several pre-defined study areas summarized table .\nselect one predefined study areas, set .studyAreaName use one following, corresponding polygon IDs map .run LandWeb entire province use one provAB, provMB, provNWT, provSK.run entire LandWeb study area, use LandWeb.","code":""},{"path":"running-landweb.html","id":"select-a-scenario","chapter":"2 Running LandWeb","heading":"2.1.2 Select a scenario","text":"version 2.0.0 LandWeb model, seed dispersal distances needed adjusted ensure sufficient regeneration following fire.\nadjustments cause model behave like state-transition model, rather process-based one.Version 3.0.0 relaxes parameter forcings behave like standard LANDIS-II model.dispersal scenario principally set via .version can overridden set via .dispersalType:Additionally, v2.0.0 model uses adjusted fire return intervals (FRI) log-adjusted rates spread (ROS).\nVersion 3.0.0 uses LandMine defaults.fire scenario principally set via .version can overridden specifying .ROStype:define scenario run, select one dispersal scenario one fire scenario tables .\nLandWeb v2.0.0 runs 2019 run using .dispersalType = \"high\" .ROStype = \"log\".\nUsing v3.0.0 model, .dispersalType = \"default\" .ROStype = \"default\".","code":""},{"path":"running-landweb.html","id":"replication","chapter":"2 Running LandWeb","heading":"2.1.3 Replication","text":"run multiple replicates given run, set .rep integer corresponding replicate id.\nreplicate runs use different random seed, seed saved output reuse event replicate needs rerun.\nrerun replicate using different seed, sure delete run’s seed.rds file.\nseed used also saved human-readable seed.txt file.","code":""},{"path":"running-landweb.html","id":"running-the-model","chapter":"2 Running LandWeb","heading":"2.2 Running the model","text":"NOTE: first time model run, automatically download additional data install additional R packages, can take time complete.","code":""},{"path":"running-landweb.html","id":"interactive-r-session","chapter":"2 Running LandWeb","heading":"2.2.1 Interactive R session","text":"working R session, sure set working directory LandWeb project directory.\nfirst time running model, open file 00-global.R, step line ensure prompts etc. answered correctly.authenticating Google Drive, sure check box allow access files.","code":"\nsource(\"00-global.R\")"},{"path":"running-landweb.html","id":"commandline-interface","chapter":"2 Running LandWeb","heading":"2.2.2 Commandline interface","text":"addition running model interactive R session, provide command line interface run replicates model study areas defined (.e., batch mode).example, run replicate number 7 model \\(250 m\\) resolution using FRI multiple \\(1\\) Alberta FMU L11, use:FMU command line runs use modified dispersal fire scenarios, thus require study area, replicate, FRI multiple defined.run replicate number 7 model entire province Alberta, use:FMA command line runs use highDispersal_logROS scenarios \\(250 m\\) resolution, thus require study area replicate defined.run entire LandWeb study area, replicate number needs passed.\nexample:LandWeb command line run set dispersal fire scenarios , pixel resolution (.pixelSize) \\(250 m\\), thus require study area replicate defined.","code":"cd ~/GitHub/LandWeb\n\n## ./run_fmu.sh <FMU> <FRI> <RES> <REP>\n./run_fmu.sh L11 1 250 7cd ~/GitHub/LandWeb\n\n## ./run_fma.sh <FMU> <REP>\n./run_fma.sh provAB 7\n# ./run_fma_win.sh provAB 7 ## if on Windows!## ./run_landweb.sh <REP>\n./run_landweb.sh 7"},{"path":"running-landweb.html","id":"post-processing-analyses","chapter":"2 Running LandWeb","heading":"2.3 Post-processing analyses","text":"run several reps model given study area, results combined subsequent post-processing analyses generate following outputs set reporting polygons within study area:boxplots leading vegetation cover;histograms leading vegetation cover;histograms large patches.run processing, use .mode = \"postprocess\" sure set number replicates run config.","code":""},{"path":"running-landweb.html","id":"advanced-setup","chapter":"2 Running LandWeb","heading":"2.4 Advanced setup","text":"","code":""},{"path":"running-landweb.html","id":"customizing-model-run-configuration","chapter":"2 Running LandWeb","heading":"2.4.1 Customizing model run configuration","text":"See SpaDES.config/R/config.landweb.R.(TODO)","code":""},{"path":"running-landweb.html","id":"cache-backend","chapter":"2 Running LandWeb","heading":"2.4.2 Cache backend","text":"Simulation caching provided reproducible SpaDES.core packages, enabled default.default cache uses SQLite database backend stores cache files cache/.\nHowever, database backends can also used, advanced users running multiple parallel simulations may wish set use PostgreSQL database cache.See https://github.com/PredictiveEcology/SpaDES/wiki/Using-alternate-database-backends--Cache ensure following options added user-specific config 02a-user-config.R:","code":"reproducible.cacheSaveFormat = \"qs\",\nreproducible.conn = SpaDES.config::dbConnCache(\"postgresql\"),"},{"path":"running-landweb.html","id":"speeding-up-disk-based-operations","chapter":"2 Running LandWeb","heading":"2.4.3 Speeding up disk-based operations","text":"Caching disk-based file operations benefit using solid state drive (SSD) instead conventional spinning hard drive.\nAdvanced users can move cache/ directory SSD mountpoint create symlink location project directory.\nLikewise, users can configure scratch path temporary raster file operations point SSD location.","code":""},{"path":"running-landweb.html","id":"additional-resources","chapter":"2 Running LandWeb","heading":"2.5 Additional Resources","text":"Resources (re)learning R spatial data:https://rspatial.org","code":""},{"path":"study-areas.html","id":"study-areas","chapter":"Study areas","heading":"Study areas","text":"Lorem ipsum … (TODO)","code":""},{"path":"landr-landweb_preamble-module.html","id":"landr-landweb_preamble-module","chapter":"3 LandR LandWeb_preamble Module","heading":"3 LandR LandWeb_preamble Module","text":"","code":""},{"path":"landr-landweb_preamble-module.html","id":"authors","chapter":"3 LandR LandWeb_preamble Module","heading":"3.0.0.1 Authors:","text":"Eliot J B McIntire eliot.mcintire@nrcan-rncan.gc.ca [aut, cre], Alex M. Chubaty achubaty@-cast.ca [aut], Ceres Barros cbarros@mail.ubc.ca [aut]\n","code":""},{"path":"landr-landweb_preamble-module.html","id":"module-overview","chapter":"3 LandR LandWeb_preamble Module","heading":"3.1 Module Overview","text":"","code":""},{"path":"landr-landweb_preamble-module.html","id":"module-summary","chapter":"3 LandR LandWeb_preamble Module","heading":"3.1.1 Module summary","text":"Set study areas parameters LandWeb simulations.","code":""},{"path":"landr-landweb_preamble-module.html","id":"parameters","chapter":"3 LandR LandWeb_preamble Module","heading":"3.2 Parameters","text":"Provide summary user-visible parameters.","code":""},{"path":"landr-landweb_preamble-module.html","id":"data-dependencies","chapter":"3 LandR LandWeb_preamble Module","heading":"3.3 Data dependencies","text":"","code":""},{"path":"landr-landweb_preamble-module.html","id":"input-data","chapter":"3 LandR LandWeb_preamble Module","heading":"3.3.1 Input data","text":"Description module inputs.","code":""},{"path":"landr-landweb_preamble-module.html","id":"output-data","chapter":"3 LandR LandWeb_preamble Module","heading":"3.3.2 Output data","text":"Description module outputs.","code":""},{"path":"landr-landweb_preamble-module.html","id":"links-to-other-modules","chapter":"3 LandR LandWeb_preamble Module","heading":"3.4 Links to other modules","text":"Originally developed use LandR Biomass suite modules, LandMine fire model.\n## References\n","code":""},{"path":"vegetation-submodel.html","id":"vegetation-submodel","chapter":"Vegetation submodel","heading":"Vegetation submodel","text":"LandR ecosystem SpaDES modules variety data /calibration modules used obtain pre-process input data, well estimate input parameters required core forest landscape simulation module Biomass_core.\nmodules presented subsequent chapters.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"landr-biomass_speciesdata-module","chapter":"4 LandR Biomass_speciesData Module","heading":"4 LandR Biomass_speciesData Module","text":"documentation work progress.\nPlease report discrepancies omissions https://github.com/PredictiveEcology/Biomass_speciesData/issues.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"authors-1","chapter":"4 LandR Biomass_speciesData Module","heading":"4.0.0.1 Authors:","text":"Eliot J B McIntire eliot.mcintire@nrcan-rncan.gc.ca [aut, cre], Alex M. Chubaty achubaty@-cast.ca [aut], Ceres Barros cbarros@mail.ubc.ca [aut]\n","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"module-overview-1","chapter":"4 LandR Biomass_speciesData Module","heading":"4.1 Module Overview","text":"","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"module-summary-1","chapter":"4 LandR Biomass_speciesData Module","heading":"4.1.1 Module summary","text":"module downloads pre-process species % cover data layers \npassed LandR data modules (e.g., Biomass_borealDataPrep) \nLandR forest simulation module Biomass_core.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"module-inputs-and-parameters-at-a-glance","chapter":"4 LandR Biomass_speciesData Module","heading":"4.1.2 Module inputs and parameters at a glance","text":"full list input objects (Table\n4.1) parameters (Table\n4.2) Biomass_speciesData expects.\n, input must provided (.e., Biomass_speciesData\ndefault ) studyAreaLarge.Raw data layers downloaded module saved dataPath(sim), can\ncontrolled via options(reproducible.destinationPath = ...).Table 4.1: List Biomass_speciesData input objects description.Table 4.2: List Biomass_speciesData parameters description.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"events","chapter":"4 LandR Biomass_speciesData Module","heading":"4.1.3 Events","text":"Biomass_speciesData runs two events:Module “initiation” (init event), species %\ncover layers downloaded processed.Plotting processed species cover layers (initPlot event).","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"module-outputs","chapter":"4 LandR Biomass_speciesData Module","heading":"4.1.4 Module outputs","text":"module produces following outputs (Table\n4.3):Table 4.3: List Biomass_speciesData output objects description.automatically saves processed species cover layers output path\ndefined getPaths(sim)$outputPath.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"links-to-other-modules-1","chapter":"4 LandR Biomass_speciesData Module","heading":"4.1.5 Links to other modules","text":"Intended used LandR data modules (e.g.,\nBiomass_borealDataPrep) require species cover data LandR forest\nsimulation Biomass_core module. can see potential module linkages\nwithin LandR ecosystem\n. Select\nBiomass_speciesData drop-menu see linkages.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"getting-help-1","chapter":"4 LandR Biomass_speciesData Module","heading":"4.1.6 Getting help","text":"https://github.com/PredictiveEcology/Biomass_speciesData/issues","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"module-manual","chapter":"4 LandR Biomass_speciesData Module","heading":"4.2 Module manual","text":"","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"detailed-description","chapter":"4 LandR Biomass_speciesData Module","heading":"4.2.1 Detailed description","text":"module accesses processes species percent cover (% cover)\ndata parametrisation initialization LandR Biomass_core. \nmodule ensures 1) data use geospatial geometries 2) \ncorrectly re-projected studyAreaLarge, 3) attempts sequentially\nfill-replace lowest quality data higher quality data \nseveral data sources used. ’s primary output RasterStack species\n% cover, layer corresponding species.Currently, module can access Canadian Forest Inventory forest attributes\nkNN dataset [default; Beaudoin et al. (2017)], Common Attribute Schema \nForest Resource Inventories [CASFRI; Cosco (2011)] dataset, Ontario Forest\nResource Inventory (ONFRI), dataset specific Alberta compiled Paul\nPickell, Alberta forest inventory datasets. However, NFI\nkNN data freely available – access datasets must granted\nmodule developers data owners, Google account required.\nNevertheless, module flexible enough user can use process\nadditional datasets, provided adequate R function passed \nmodule (see types parameter details Parameters)multiple data sources used, module use replace lower quality\ndata higher quality data following order specified parameter\ntypes (see Parameters).multiple species given data source grouped, %\ncover summed across species group within pixel. Please see\nsppEquiv input Input objects information species groups\ndefined.module can also exclude species % cover layers don’t\nminimum % cover value least one pixel. means \nuser still inspect many pixels species deemed present,\npossible data pixels high %\ncover given species. case, user may choose exclude \nspecies posteriori. summary plot automatically shown \nBiomass_speciesData can help diagnose whether certain species present \npixels (see Fig. 4.1).","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"initialization-inputs-and-parameters","chapter":"4 LandR Biomass_speciesData Module","heading":"4.2.2 Initialization, inputs and parameters","text":"Biomass_speciesData initializes prepares inputs provided \ninternet access download raw data layers (layers\npreviously downloaded stored folder specified \noptions(\"reproducible.destinationPath\")).module defaults processing cover data fo species listed \nBoreal column default sppEquiv input data.table object, \navailable % cover layers kNN dataset (Table\n4.4; see ?LandR::sppEquivalencies_CA \ninformation):Table 4.4: List species cover data downloaded default Biomass_speciesData.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"input-objects","chapter":"4 LandR Biomass_speciesData Module","heading":"4.2.2.1 Input objects","text":"Biomass_speciesData requires following input data layersTable 4.5: List Biomass_speciesData input objects description.inputs Table 4.5, \nfollowing particularly important deserve special attention:studyAreaLarge – polygon defining area species cover\ndata area desired. can larger (never smaller) study area\nused simulation forest dynamics (.e., studyArea object \nBiomass_core).studyAreaLarge – polygon defining area species cover\ndata area desired. can larger (never smaller) study area\nused simulation forest dynamics (.e., studyArea object \nBiomass_core).sppEquiv – table correspondences different species naming\nconventions. table used across several LandR modules, including\nBiomass_core. particularly important determine\nwhether species (cover layers) merged, \ndesired user. instance, user wishes simulate generic\nPicea spp. includes, Picea glauca, Picea mariana Picea\nengelmannii, need provide three species names \ndata column (e.g., KNN obtaining forest attribute kNN data layers \nCanadian Forest Inventory), name (e.g., “Pice_Spp”) \ncoumn chosen naming convention used throughout simulation (\nsppEquivCol parameter); see Table\n4.6 example).sppEquiv – table correspondences different species naming\nconventions. table used across several LandR modules, including\nBiomass_core. particularly important determine\nwhether species (cover layers) merged, \ndesired user. instance, user wishes simulate generic\nPicea spp. includes, Picea glauca, Picea mariana Picea\nengelmannii, need provide three species names \ndata column (e.g., KNN obtaining forest attribute kNN data layers \nCanadian Forest Inventory), name (e.g., “Pice_Spp”) \ncoumn chosen naming convention used throughout simulation (\nsppEquivCol parameter); see Table\n4.6 example).Table 4.6: Example species merging simulation. user wants model Abies balsamea, . lasiocarpa Pinus contorta separate species, Picea spp. genus-level group. , six species identified 'KNN' column, % cover layers can obtained, 'Boreal' column (defines naming convention used simulation example) Picea spp. name. Biomass_speciesData merge % cover data single layer summing cover per pixel.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"parameters-1","chapter":"4 LandR Biomass_speciesData Module","heading":"4.2.2.2 Parameters","text":"Table 4.7 lists parameters used \nBiomass_speciesData detailed information.Table 4.7: List Biomass_speciesData parameters description.parameters listed Table 4.7,\nfollowing particularly important:coverThresh – integer. Defines minimum % cover value (\n0-100) species must least one pixel considered\npresent study area, otherwise excluded final stack \nspecies layers. Note affect species data \neventual simulation user need adjust simulation parameters\n(e.g., species trait tables need match species cover\nlayers) accordingly.coverThresh – integer. Defines minimum % cover value (\n0-100) species must least one pixel considered\npresent study area, otherwise excluded final stack \nspecies layers. Note affect species data \neventual simulation user need adjust simulation parameters\n(e.g., species trait tables need match species cover\nlayers) accordingly.types – character. % cover data sources used\n(see Detailed description). Several data sources can passed, \ncase module overlay lower quality layers higher quality\nones following order data sources specified types – .e.,\ntypes == c(\"KNN\", \"CASFRI\", \"ForestInventory\"), KNN assumed \nlowest quality data set ForestInventory highest: values \nKNN layers replaced overlapping values CASFRI layers \nvalues KNN CASFRI layers replaced overlapping values\nForestInventory layers.types – character. % cover data sources used\n(see Detailed description). Several data sources can passed, \ncase module overlay lower quality layers higher quality\nones following order data sources specified types – .e.,\ntypes == c(\"KNN\", \"CASFRI\", \"ForestInventory\"), KNN assumed \nlowest quality data set ForestInventory highest: values \nKNN layers replaced overlapping values CASFRI layers \nvalues KNN CASFRI layers replaced overlapping values\nForestInventory layers.","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"simulation-flow","chapter":"4 LandR Biomass_speciesData Module","heading":"4.2.3 Simulation flow","text":"general flow Biomass_speciesData processes :Download (necessary) spatial processing species cover layers\nfirst data source listed types parameter. Spatial\nprocessing consists sub-setting data area defined \nstudyAreaLarge ensuring spatial projection resolution\nmatch rasterToMatchLarge. spatial processing, species\nlayers pixels values >= coverThresh parameter\nexcluded.Download (necessary) spatial processing species cover layers\nfirst data source listed types parameter. Spatial\nprocessing consists sub-setting data area defined \nstudyAreaLarge ensuring spatial projection resolution\nmatch rasterToMatchLarge. spatial processing, species\nlayers pixels values >= coverThresh parameter\nexcluded.one data source listed types, second set species\ncover layers downloaded processed .one data source listed types, second set species\ncover layers downloaded processed .second set layers assumed highest quality dataset \nused replaced overlapping pixel values first (including \nspecies whose layers may initially excluded applying \ncoverThresh filter).second set layers assumed highest quality dataset \nused replaced overlapping pixel values first (including \nspecies whose layers may initially excluded applying \ncoverThresh filter).Steps 2 3 repeated remaining data sources listed types.Steps 2 3 repeated remaining data sources listed types.Final layers saved disk plotted. summary number pixels\nforest cover calculated (treedand numTreed output objects; see\nModule outputs).Final layers saved disk plotted. summary number pixels\nforest cover calculated (treedand numTreed output objects; see\nModule outputs).","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"usage-example","chapter":"4 LandR Biomass_speciesData Module","heading":"4.3 Usage example","text":"","code":""},{"path":"landr-biomass_speciesdata-module.html","id":"load-spades-and-other-packages.","chapter":"4 LandR Biomass_speciesData Module","heading":"4.3.1 Load SpaDES and other packages.","text":"","code":"\nif (!require(Require)) {\n    install.packages(\"Require\")\n    library(Require)\n}\n\nRequire(c(\"PredictiveEcology/SpaDES.install\", \"SpaDES\", \"PredictiveEcology/SpaDES.core@development\",\n    \"PredictiveEcology/LandR\"), install_githubArgs = list(dependencies = TRUE))"},{"path":"landr-biomass_speciesdata-module.html","id":"get-module-necessary-packages-and-set-up-folder-directories","chapter":"4 LandR Biomass_speciesData Module","heading":"4.3.2 Get module, necessary packages and set up folder directories","text":"","code":"\ntempDir <- tempdir()\npaths <- list(inputPath = normPath(file.path(tempDir, \"inputs\")),\n    cachePath = normPath(file.path(tempDir, \"cache\")), modulePath = normPath(file.path(tempDir,\n        \"modules\")), outputPath = normPath(file.path(tempDir,\n        \"outputs\")))\n\ngetModule(\"PredictiveEcology/Biomass_speciesData\", modulePath = paths$modulePath,\n    overwrite = TRUE)\n\n## make sure all necessary packages are installed:\nmakeSureAllPackagesInstalled(paths$modulePath)"},{"path":"landr-biomass_speciesdata-module.html","id":"setup-simulation","chapter":"4 LandR Biomass_speciesData Module","heading":"4.3.3 Setup simulation","text":"demonstration using default parameter values, except\ncoverThresh , lowered 5%. species layers (\nmajor output interest) saved automatically, need tell\nspades save using outputs argument (see\n?SpaDES.core::outputs).pass global parameter .plotInitialTime = 1 simInitAndSpades\nfunction activate plotting.","code":"\n# User may want to set some options -- see\n# ?reproducibleOptions -- e.g., often the path to the\n# 'inputs' folder will be set outside of project by user:\n# options(reproducible.inputPaths =\n# 'E:/Data/LandR_related/') # to re-use datasets across\n# projects\nstudyAreaLarge <- Cache(randomStudyArea, size = 1e+07, cacheRepo = paths$cachePath)  # cache this so it creates a random one only once on a machine\n\n# Pick the species you want to work with -- here we use the\n# naming convention in 'Boreal' column of\n# LandR::sppEquivalencies_CA (default)\nspeciesNameConvention <- \"Boreal\"\nspeciesToUse <- c(\"Pice_Gla\", \"Popu_Tre\", \"Pinu_Con\")\n\nsppEquiv <- LandR::sppEquivalencies_CA[get(speciesNameConvention) %in%\n    speciesToUse]\n# Assign a colour convention for graphics for each species\nsppColorVect <- LandR::sppColors(sppEquiv, speciesNameConvention,\n    newVals = \"Mixed\", palette = \"Set1\")\n\n## Usage example\nmodules <- list(\"Biomass_speciesData\")\nobjects <- list(studyAreaLarge = studyAreaLarge, sppEquiv = sppEquiv,\n    sppColorVect = sppColorVect)\nparams <- list(Biomass_speciesData = list(coverThresh = 5L))"},{"path":"landr-biomass_speciesdata-module.html","id":"run-module","chapter":"4 LandR Biomass_speciesData Module","heading":"4.3.4 Run module","text":"Note data module (.e., attempts prepare data \nsimulation) iterating start end times \nset 1 .outputs Biomass_speciesData (dominant species) \nrandomly generated study area within Canada.\nFigure 4.1: Biomass_speciesData automatically generates plot species dominance number presences study area .plotInitialTime=1 passed argument.\n","code":"\nopts <- options(reproducible.useCache = TRUE, reproducible.inputPaths = paths$inputPath)\n\nmySimOut <- simInitAndSpades(times = list(start = 1, end = 1),\n    modules = modules, parameters = params, objects = objects,\n    paths = paths, .plotInitialTime = 1)\noptions(opts)"},{"path":"landr-biomass_speciesdata-module.html","id":"references","chapter":"4 LandR Biomass_speciesData Module","heading":"4.4 References","text":"","code":""},{"path":"web-app.html","id":"web-app","chapter":"Web app","heading":"Web app","text":"spring 2023, fRI Research longer hosts LandWeb App.\nHowever, appropriate access output data, app may run local shiny instance.Previously available https://landweb.ca.","code":""},{"path":"modifying-landweb.html","id":"modifying-landweb","chapter":"5 Modifying LandWeb","heading":"5 Modifying LandWeb","text":"","code":""},{"path":"modifying-landweb.html","id":"example-1-adding-new-reporting-polygons","chapter":"5 Modifying LandWeb","heading":"5.1 Example 1: adding new reporting polygons","text":"‘Reporting polygons’ refer polygons LandWeb results summarized within study area.\ncreated LandWeb_preamble module, added sim$ml (object class map, map package).\nReporting polygons used simulation, rather post-processing LandWeb_summaries module.Adding new reporting polygons straightforward - one simply needs edit LandWeb_preamble code 1) create object 2) add map (.e., sim$ml) object.\nreporting polygons retrieved public Google Drive URLs, steps may combined single mapAdd() call.Downstream use requires set reporting polygons Name (shinyLabel) field (column).\nfields typically derived single field raw source, thus identical value.\nAdditionally, helper function joinreportingPolygons() used following geospatial intersection operation (e.g., using postProcess()) ensure post-intersection labels like Names.1 shinyLabel.1 corrected.","code":""},{"path":"modifying-landweb.html","id":"national-scale-polygons","chapter":"5 Modifying LandWeb","heading":"5.1.1 National-scale polygons","text":"adding reporting polygons derived national-scale data sources, changes need made LandWeb_preamble.R well study-area-specific files LandWeb_preamble/R/ LandWeb runs using study area can make use new reporting polygons.Next, need modify regional files make use new national polygons, intersected cropped study area:","code":"\n## LandWeb_preamble.R\n\n## create the national-scale object and add to map object in a single call\nml <- mapAdd(map = ml, layerName = \"National Ecoregions\",\n             useSAcrs = TRUE, poly = TRUE, overwrite = TRUE,\n             url = \"https://sis.agr.gc.ca/cansis/nsdb/ecostrat/region/ecoregion_shp.zip\",\n             columnNameForLabels = \"REGION_NAM\", isStudyArea = FALSE, filename2 = NULL)\n\n## ensure there is a 'Name' field in the new object\nml[[\"National Ecoregions\"]][[\"Name\"]] <- ml[[\"National Ecoregions\"]][[\"REGION_NAM\"]]\n## LandWeb_preamble/R/provSK.R\n\n## 1. create the reporting polygons by intesecting the National Ecoregions with SK admin boundary\nSK.natler <- postProcess(ml[[\"National Ecoregions\"]],\n                         studyArea = SK, useSAcrs = TRUE,\n                         filename2 = file.path(dataDir, \"SK_NATLER.shp\")) |>\n  joinReportingPolygons(SK)\n\n\n## 2. add to the map object\nml <- mapAdd(SK.natler, ml, layerName = \"SK NATLER\", useSAcrs = TRUE, poly = TRUE,\n             analysisGroupReportingPolygon = \"SK NATLER\",\n             columnNameForLabels = \"REGION_NAM\", filename2 = NULL)"},{"path":"modifying-landweb.html","id":"regional-or-study-area-specific-polygons","chapter":"5 Modifying LandWeb","heading":"5.1.2 Regional or study-area-specific polygons","text":"adding regional study-area-specific reporting polygons (e.g., FMA’s active/passive landbase), new reporting polygons added corresponding study area code file found LandWeb_preamble/R.","code":"\n## LandWeb_preamble/R/WestFraser.R\n\n## 1. create the reporting polygons by downloading and cleaning up shapefile\nwf_br.lbstatus <- Cache(\n  prepInputs,\n  url = \"https://drive.google.com/file/d/1A7N_EIbO2wMBI_YTmU2Z-bQwqC9sY_EC/\",\n  destinationPath = dataDir,\n  targetFile = \"BRL_Landbase.shp\", alsoExtract = \"similar\",\n  fun = \"sf::st_read\", studyArea = wf_br, useSAcrs = TRUE\n)\nwf_br.lbstatus <- wf_br.lbstatus[st_is_valid(wf_br.lbstatus), ] ## remove invalid geometries\nwf_br.lbstatus <- wf_br.lbstatus[!st_is_empty(wf_br.lbstatus), ] ## remove empty polygons\nwf_br.lbstatus <- Cache({\n  mutate(wf_br.lbstatus, Name = LBC_LBStat, geometry = geometry, .keep = \"used\") |>\n    group_by(Name) |>\n    summarise(geometry = sf::st_union(geometry)) |>\n    ungroup() |>\n    mutate(shinyLabel = Name, .before = geometry) |>\n    joinReportingPolygons(wf_br)\n})\n\n## 2. add to the map object\nml <- mapAdd(wf_br.lbstatus, ml, layerName = \"West Fraser Blue Ridge LBstatus\", useSAcrs = TRUE, poly = TRUE,\n             analysisGroupReportingPolygon = \"West Fraser Blue Ridge LBstatus\",\n             columnNameForLabels = \"Name\", filename2 = NULL)"},{"path":"modifying-landweb.html","id":"example-2-adding-a-new-study-area","chapter":"5 Modifying LandWeb","heading":"5.2 Example 2: adding a new study area","text":"create custom study area area northwestern Alberta.\nwant use latest FMU map Spring 2022 (https://www.alberta.ca/forest-management-agreements).Externally LandWeb, create shapefile (similar) new study area, dissolving internal polygon boundaries.\n\nnwab <- sf::st_read(\"AB_FMAs_2022-03-25/Forest Management Unit.shp\") |> \n  subset(FMU_CODE %% c(\"F10\", \"F11\", \"F14\", \"F15\", \"F20\", \"F23\", \"F26\", \"F51\", \"M01\",\n                         \"P08\", \"P14\", \"P19\", \"P20\", \"P21\", \"P22\", \"P52\", \"P55\", \"S10\", \"S11\", \"S14\")) |> \n  sf::st_union()Externally LandWeb, create shapefile (similar) new study area, dissolving internal polygon boundaries.Externally LandWeb, upload shapefile Google Drive record file’s Google Drive ID.\n\nshpfile <- \"inputs/NW_AB.shp\"\nsf::st_write(nwab, shpfile)\n\nresult <- googledrive::drive_put(shpfile, googledrive::as_id(\"1LsYuuYICkcpElAkEABFM5zJXf5tTyMLG\"))\nfid <- result$idExternally LandWeb, upload shapefile Google Drive record file’s Google Drive ID.Determine name use running LandWeb new study area, modify LandWeb_preamble.R use new study area name.\nAdd new case -else block LandWeb_preamble.R:\n} else (grepl(\"customABNW\", P(sim)$.studyAreaName)) {\n  ml <- customABNW(ml, P(sim)$.studyAreaName, dataDir, sim$canProvs, P(sim)$bufferDist, asStudyArea = TRUE)Determine name use running LandWeb new study area, modify LandWeb_preamble.R use new study area name.\nAdd new case -else block LandWeb_preamble.R:Add new study area map object wrapping necessary components new function defined new file LandWeb_preamble/R.\n’s simplest use existing function/file LandWeb_preamble/R template, making modifications appropriate new study area.\ncopy LandWeb_preamble/R/provAB.R LandWeb_preamble/R/NWAB.R;\nedit LandWeb_preamble/R/NWAB.R, crop AB new study area (NWAB) subsquently using NWAB lieu AB throughout;\nremove unnecessary elements (e.g., planning units planning regions).\nAdd new study area map object wrapping necessary components new function defined new file LandWeb_preamble/R.\n’s simplest use existing function/file LandWeb_preamble/R template, making modifications appropriate new study area.copy LandWeb_preamble/R/provAB.R LandWeb_preamble/R/NWAB.R;copy LandWeb_preamble/R/provAB.R LandWeb_preamble/R/NWAB.R;edit LandWeb_preamble/R/NWAB.R, crop AB new study area (NWAB) subsquently using NWAB lieu AB throughout;edit LandWeb_preamble/R/NWAB.R, crop AB new study area (NWAB) subsquently using NWAB lieu AB throughout;remove unnecessary elements (e.g., planning units planning regions).remove unnecessary elements (e.g., planning units planning regions).now able run LandWeb model setting `.studyAreaName = “customABNW” use new study area.now able run LandWeb model setting `.studyAreaName = “customABNW” use new study area.","code":"\nnwab <- sf::st_read(\"AB_FMAs_2022-03-25/Forest Management Unit.shp\") |> \n  subset(FMU_CODE %in% c(\"F10\", \"F11\", \"F14\", \"F15\", \"F20\", \"F23\", \"F26\", \"F51\", \"M01\",\n                         \"P08\", \"P14\", \"P19\", \"P20\", \"P21\", \"P22\", \"P52\", \"P55\", \"S10\", \"S11\", \"S14\")) |> \n  sf::st_union()\nshpfile <- \"inputs/NW_AB.shp\"\nsf::st_write(nwab, shpfile)\n\nresult <- googledrive::drive_put(shpfile, googledrive::as_id(\"1LsYuuYICkcpElAkEABFM5zJXf5tTyMLG\"))\nfid <- result$id} else if (grepl(\"customABNW\", P(sim)$.studyAreaName)) {\n  ml <- customABNW(ml, P(sim)$.studyAreaName, dataDir, sim$canProvs, P(sim)$bufferDist, asStudyArea = TRUE)"},{"path":"modifying-landweb.html","id":"example-3-updating-the-lthfc-map","chapter":"5 Modifying LandWeb","heading":"5.3 Example 3: updating the LTHFC map","text":"Using updated version data source requires basic code modifications provided following conditions met:spatial data attributes remain (e.g., field names );new URL provided new data source;new file name different previous version (e.g., version number date).show modify LandWeb_preamble module use hypothetical new version longs-term historic fire cycle (LTHFC) map.looking LandWeb_preamble.R see current version file landweb_ltfc_v8.shp.looking LandWeb_preamble.R see current version file landweb_ltfc_v8.shp.create new spatial layer save landweb_ltfc_v9.shp.create new spatial layer save landweb_ltfc_v9.shp.zip new shapefile (auxiliary files) upload zip file Google Drive landweb_ltfc_v9.zip, making note Google Drive share URL.zip new shapefile (auxiliary files) upload zip file Google Drive landweb_ltfc_v9.zip, making note Google Drive share URL.modify two mapAdd() calls LandWeb_preamble.R reference previous version (v8) LTHFC map use new (v9) Google Drive URL.modify two mapAdd() calls LandWeb_preamble.R reference previous version (v8) LTHFC map use new (v9) Google Drive URL.","code":""},{"path":"modifying-landweb.html","id":"contributing-changes","chapter":"5 Modifying LandWeb","heading":"5.4 Contributing changes","text":"via pull request4 development branch GitHub","code":""},{"path":"references-1.html","id":"references-1","chapter":"References","heading":"References","text":"","code":""}]
